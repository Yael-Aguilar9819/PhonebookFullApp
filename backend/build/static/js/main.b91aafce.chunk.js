(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{13:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(7),c=n.n(a),o=(n(13),n(4)),s=n(8),i=n.n(s),u=n(0),f=function(e){var t=e.onClickFunc,n=e.text;return Object(u.jsx)("button",{type:"submit",onClick:t,children:n})},l=function(e){var t=e.functionControlChange,n=e.currentInputControl,r=e.textDisplay;return Object(u.jsxs)("div",{children:[r," ",Object(u.jsx)("input",{value:n,onChange:t})]})},p={marginLeft:7},b=function(e){var t=e.textInput1,n=e.textInput2,r=e.submitButton;return Object(u.jsxs)("form",{style:p,children:[t,n,Object(u.jsx)("div",{children:r})]})},d=function(e){var t=e.name,n=e.number,r=e.deleteButton;return Object(u.jsx)("div",{children:Object(u.jsxs)("p",{children:[t," ",n," ",r]})})},j=function(e){var t=e.onClickFunc,n=e.text;return Object(u.jsx)("button",{style:{marginLeft:4,maxHeight:20},type:"submit",onClick:t,children:n})},h=function(e){var t=e.personsArray,n=e.deleteFunction,r=e.filterToSearch;return Object(u.jsx)("ul",{children:t.filter(r()).map((function(e){return Object(u.jsx)(d,{name:e.name,number:e.number,deleteButton:Object(u.jsx)(j,{onClickFunc:function(){return n(e)},text:"Delete"})},e.name)}))})},m=n(2),x=n.n(m),g=n(3),v="/api/persons",O=function(){var e=Object(g.a)(x.a.mark((function e(t,n,r){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:n,headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 2:if(!((a=e.sent).status-200>=99)){e.next=5;break}throw new Error("cannot fetch data with error code: ".concat(a.status));case 5:return e.abrupt("return",a.json());case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),C=function(){var e=Object(g.a)(x.a.mark((function e(){var t,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(v);case 2:if(200===(t=e.sent).status){e.next=5;break}throw new Error("cannot fetch data with error code: ".concat(t.status));case 5:return e.next=7,t.json();case 7:return n=e.sent,e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(g.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(v,"POST",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(g.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("".concat(v,"/").concat(t),"DELETE",{personID:t});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_={getAll:C,sendNewPersonInfo:w,modifyPersonInfo:function(){var e=Object(g.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("".concat(v,"/").concat(t.id),"PUT",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deletePerson:I},y=n(5),k=n.n(y),M=function(e){var t=e.messageInfo,n=t.message,r=t.status;return null===n?null:"positive"===r?Object(u.jsx)("div",{className:k.a.positiveContainer,children:Object(u.jsx)("h2",{className:k.a.positiveMessage,children:n})}):Object(u.jsx)("div",{className:k.a.negativeContainer,children:Object(u.jsx)("h2",{className:k.a.negativeMessage,children:n})})},N=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),s=Object(o.a)(c,2),p=s[0],d=s[1],j=Object(r.useState)(""),m=Object(o.a)(j,2),x=m[0],g=m[1],v=Object(r.useState)(""),O=Object(o.a)(v,2),C=O[0],w=O[1],I=Object(r.useState)({message:null}),y=Object(o.a)(I,2),k=y[0],N=y[1];Object(r.useEffect)((function(){_.getAll().then((function(e){return a(e)})).catch((function(e){console.log(e)}))}),[]);var S=function(e,t,n){var r=n.slice(0,t).concat(e).concat(n.slice(t+1));_.modifyPersonInfo(e).then((function(e){return console.log(e)})),a(r)},P=function(e,t,n){N({message:e,status:n}),setTimeout((function(){return N({message:null})}),1500*t)};return Object(u.jsxs)("div",{className:i.a.mainContainer,children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(M,{messageInfo:k}),Object(u.jsx)(l,{functionControlChange:function(e){w(e.target.value)},currentInputControl:C,textDisplay:"Filter shown with"}),Object(u.jsx)("h2",{children:"Add a new person contact info"}),Object(u.jsx)(b,{textInput1:Object(u.jsx)(l,{functionControlChange:function(e){d(e.target.value)},currentInputControl:p,textDisplay:"name"}),textInput2:Object(u.jsx)(l,{functionControlChange:function(e){g(e.target.value)},currentInputControl:x,textDisplay:"number"}),submitButton:Object(u.jsx)(f,{onClickFunc:function(e){e.preventDefault();var t={name:p,number:x},r=n.findIndex((function(e){return e.name.toLowerCase()===p.toLowerCase()}));if(-1!==r){if(!1===window.confirm("".concat(t.name," is already added to phonebook, replace the old number with a new one?")))return 0;t.id=n[r].id,S(t,r,n)}else _.sendNewPersonInfo(t).then((function(e){t.id=e.id,P("Added ".concat(t.name,"."),2,"positive")})),a(n.concat(t));d(""),g("")},text:"add"})}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)(h,{personsArray:n,deleteFunction:function(e){if(!window.confirm("Delete ".concat(e.name,"?")))return 0;_.deletePerson(e.id).then((function(t){return console.log("Success deleting ".concat(e.name,"!"))})).catch((function(t){P("Information of ".concat(e.name," has already been removed from server."),3,"negative"),console.log(t)}));var t=n.filter((function(t){return t.id!==e.id}));a(t)},filterToSearch:function(){return 0===C.length?function(e){return e}:function(e){return e.name.toLowerCase().substr(0,C.length)===C.toLowerCase()}}})]})},S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))};c.a.render(Object(u.jsx)(r.StrictMode,{children:Object(u.jsx)(N,{})}),document.getElementById("root")),S()},5:function(e,t,n){e.exports={basicMessage:"NotificationMessage_basicMessage__tI7-A",positiveMessage:"NotificationMessage_positiveMessage__1HAip NotificationMessage_basicMessage__tI7-A",negativeMessage:"NotificationMessage_negativeMessage__2qjxn NotificationMessage_basicMessage__tI7-A",positiveContainer:"NotificationMessage_positiveContainer__3IBI5",negativeContainer:"NotificationMessage_negativeContainer__3sSPi"}},8:function(e,t,n){e.exports={mainContainer:"App_mainContainer__Uh7aO"}}},[[16,1,2]]]);
//# sourceMappingURL=main.b91aafce.chunk.js.map